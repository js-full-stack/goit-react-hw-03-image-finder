{"version":3,"sources":["Components/ImageGallery/ImageGalleryItem.jsx","Components/ImageGallery/ImageGallery.jsx","Components/Modal/Modal.jsx","Components/Loader/Loader.jsx","Components/Searchbar/Searchbar.jsx","services/pixabay-api.js","Components/ButtonLoadMore/ButtonLoadMore.jsx","App.js","index.js"],"names":["ImageGalleryItem","alt","id","webformatURL","largeImageURL","onClick","className","src","data-img","ImageGallery","this","props","images","onSwitchModal","map","tags","Component","defaultProps","onToggleModal","modalRoot","document","querySelector","Modal","handleKeyDown","event","code","onClose","handleBackdropClick","target","currentTarget","window","addEventListener","removeEventListener","createPortal","children","Spinner","type","color","height","width","Searchbar","state","query","handleChange","e","setState","value","handleSubmit","preventDefault","onSubmit","onChange","autoComplete","autoFocus","placeholder","API_KEY","axios","defaults","baseURL","searchQuery","currentPage","url","get","then","res","data","hits","ButtonLoadMore","loadMore","App","isLoading","showModal","selectedImage","error","onChangeQuery","fetchImages","pixabayApi","prev","scrollTo","top","documentElement","scrollHeight","behavior","catch","finally","toggleModal","showLargeImage","selectImg","dataset","img","prevProps","prevState","showSpinnerWhileLoading","length","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.984b9a63.chunk.js","sourcesContent":["import './ImageGallery.scss';\nimport PropTypes from 'prop-types';\n\nconst ImageGalleryItem = ({\n  alt,\n  id,\n  webformatURL,\n  largeImageURL,\n  onClick,\n}) => {\n  return (\n    <li onClick={onClick} key={id} className=\"ImageGalleryItem\">\n      <img\n        src={webformatURL}\n        alt={alt}\n        className=\"ImageGalleryItem-image\"\n        data-img={largeImageURL}\n      />\n    </li>\n  );\n};\n\nImageGalleryItem.propTypes = {\n  onClick: PropTypes.func,\n  alt: PropTypes.string.isRequired,\n  webformatURL: PropTypes.string.isRequired,\n  largeImageURL: PropTypes.string.isRequired,\n};\n\nexport default ImageGalleryItem;\n","import ImageGalleryItem from './ImageGalleryItem';\nimport { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nclass ImageGallery extends Component {\n  render() {\n    const { images, onSwitchModal } = this.props;\n\n    return (\n      <>\n        <ul className=\"ImageGallery\">\n          {images.map(({ tags, id, webformatURL, largeImageURL }) => {\n            return (\n              <ImageGalleryItem\n                onClick={onSwitchModal}\n                webformatURL={webformatURL}\n                largeImageURL={largeImageURL}\n                alt={tags}\n                key={id}\n              />\n            );\n          })}\n        </ul>\n      </>\n    );\n  }\n}\n\nImageGallery.defaultProps = {\n  onToggleModal: () => null,\n};\n\nImageGallery.propTypes = {\n  images: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n      tags: PropTypes.string.isRequired,\n      largeImageURL: PropTypes.string.isRequired,\n      webformatURL: PropTypes.string.isRequired,\n    }),\n  ),\n  onSwitchModal: PropTypes.func.isRequired,\n};\n\nexport default ImageGallery;\n","import './Modal.scss';\nimport { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { createPortal } from 'react-dom';\nconst modalRoot = document.querySelector('#modal-root');\n\nclass Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = event => {\n    if (event.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = ({ target, currentTarget }) => {\n    if (target === currentTarget) {\n      this.props.onClose();\n    }\n  };\n  render() {\n    return createPortal(\n      <div onClick={this.handleBackdropClick} className=\"Overlay\">\n        <div className=\"Modal\">{this.props.children}</div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nModal.propTypes = {\n  handleBackdropClick: PropTypes.func.isRequired,\n};\n\nexport default Modal;\n","import Loader from 'react-loader-spinner';\nimport './Loader.scss';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nconst Spinner = () => {\n  return (\n    <div className=\"WpapperLoader\">\n      <Loader type=\"Oval\" color=\"black\" height={60} width={60} />\n    </div>\n  );\n};\n\nexport default Spinner;\n","import './Searchbar.scss';\nimport { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nclass Searchbar extends Component {\n  state = { query: '' };\n\n  handleChange = e => {\n    this.setState({ query: e.currentTarget.value });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    this.props.onSubmit(this.state.query);\n    this.setState({ query: '' });\n  };\n\n  render() {\n    const { query } = this.state;\n\n    return (\n      <header className=\"Searchbar\">\n        <form onSubmit={this.handleSubmit} className=\"SearchForm\">\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n          <input\n            onChange={this.handleChange}\n            value={query}\n            className=\"SearchForm-input\"\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n          />\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Load more</span>\n          </button>\n        </form>\n      </header>\n    );\n  }\n}\n\nSearchbar.defaultProps = {\n  handleChange: () => null,\n  handleSubmit: () => null,\n};\n\nSearchbar.propTypes = {\n  handleChange: PropTypes.func,\n  handleSubmit: PropTypes.func,\n};\n\nexport default Searchbar;\n","import axios from 'axios';\n\nconst API_KEY = '20244739-961dea85be28be305e8bcd893';\nconst BASE_URL = 'https://pixabay.com/api';\naxios.defaults.baseURL = BASE_URL;\n\nexport const fetchImages = (searchQuery = '', currentPage = 1) => {\n  const url = `?q=${searchQuery}&page=${currentPage}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`;\n\n  return axios.get(url).then(res => res.data.hits);\n};\n\nexport default { fetchImages };\n","import './ButtonLoadMore.scss';\nimport PropTypes from 'prop-types';\n\nconst ButtonLoadMore = ({ loadMore }) => {\n  return (\n    <div className=\"WrapperButtonLoadMore\">\n      <button className=\"ButtonLoadMore\" onClick={loadMore}>\n        Load more\n      </button>\n    </div>\n  );\n};\n\nButtonLoadMore.propTypes = {\n  loadMore: PropTypes.func.isRequired,\n};\n\nexport default ButtonLoadMore;\n","import ImageGallery from './Components/ImageGallery/ImageGallery';\nimport Modal from './Components/Modal';\nimport { Component } from 'react';\nimport Spinner from './Components/Loader';\n\nimport Searchbar from './Components/Searchbar';\nimport pixabayApi from './services/pixabay-api';\nimport ButtonLoadMore from './Components/ButtonLoadMore';\n\nclass App extends Component {\n  state = {\n    images: [],\n    currentPage: 1,\n    searchQuery: '',\n    isLoading: false,\n    showModal: false,\n    selectedImage: '',\n    error: null,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.searchQuery !== this.state.searchQuery) {\n      this.fetchImages();\n    }\n  }\n\n  onChangeQuery = query => {\n    if (query !== this.state.searchQuery)\n      this.setState({\n        searchQuery: query,\n        currentPage: 1,\n        images: [],\n        error: null,\n      });\n  };\n\n  fetchImages = () => {\n    const { searchQuery, currentPage } = this.state;\n    this.setState({ isLoading: true });\n\n    pixabayApi\n      .fetchImages(searchQuery, currentPage)\n      .then(hits => {\n        this.setState(prev => ({\n          images: [...prev.images, ...hits],\n          currentPage: prev.currentPage + 1,\n        }));\n        window.scrollTo({\n          top: document.documentElement.scrollHeight,\n          behavior: 'smooth',\n        });\n      })\n      .catch(error => this.setState({ error }))\n      .finally(() => {\n        this.setState({\n          isLoading: false,\n        });\n      });\n  };\n\n  toggleModal = () => {\n    this.setState(prev => ({\n      showModal: !prev.showModal,\n    }));\n  };\n\n  showLargeImage = e => {\n    const selectImg = e.target.dataset.img;\n\n    this.toggleModal();\n\n    selectImg &&\n      this.setState({\n        selectedImage: selectImg,\n      });\n  };\n\n  render() {\n    const { images, showModal, error, isLoading, selectedImage } = this.state;\n    const showSpinnerWhileLoading = images.length > 0 && !isLoading;\n\n    return (\n      <>\n        {error && <h1>Ошибка, что-то пошло не так!</h1>}\n\n        <Searchbar onSubmit={this.onChangeQuery} />\n\n        {images.length > 0 && (\n          <ImageGallery images={images} onSwitchModal={this.showLargeImage} />\n        )}\n\n        {isLoading && <Spinner />}\n\n        {/* {isLoading && (\n          <Loader type=\"Oval\" color=\"black\" height={80} width={80} />\n        )} */}\n\n        {showSpinnerWhileLoading && (\n          <ButtonLoadMore loadMore={this.fetchImages} />\n        )}\n\n        {showModal && (\n          <Modal onClose={this.toggleModal}>\n            <img src={selectedImage} alt=\"\" />\n          </Modal>\n        )}\n      </>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'modern-normalize/modern-normalize.css';\nimport './basic.scss';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}